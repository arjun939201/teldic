<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dictionary - Main Page</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { color: #333; margin-bottom: 20px; }

    /* Search Section */
    .search-box {
      width: 90%;
      max-width: 600px;
      text-align: center;
      margin-bottom: 20px;
    }
    input[type="text"] {
      width: 70%;
      padding: 10px;
      font-size: 16px;
    }
    button {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
    }
    button:hover { background: #0056b3; }

    /* Results + Random Word */
    .result-box, .random-box {
      width: 90%;
      max-width: 600px;
      min-height: 100px;
      margin-top: 15px;
      padding: 20px;
      border: 1px solid #ddd;
      background: #fff;
      border-radius: 10px;
      text-align: left;
      box-sizing: border-box;
    }
    .box-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #444;
    }
    .nav-buttons {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
    }
    .nav-buttons button {
      flex: 1;
      margin: 0 5px;
      background: #28a745;
    }
    .nav-buttons button:hover { background: #1e7e34; }

    /* Read Button */
    .read-btn {
      margin-top: 30px;
      padding: 12px 20px;
      font-size: 18px;
      background: #6c63ff;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .read-btn:hover { background: #5147d8; }
  </style>
</head>
<body>
  <h1>üìñ My Dictionary</h1>

  <!-- Search -->
  <div class="search-box">
    <input type="text" id="searchInput" placeholder="Search a word...">
    <button onclick="searchWord()">Search</button>
  </div>

  <!-- Search Result -->
  <div class="result-box">
    <div class="box-title">üîé Search Result</div>
    <div id="searchResult">No search yet.</div>
  </div>

  <!-- Random Word -->
  <div class="random-box">
    <div class="box-title">üé≤ Random Word</div>
    <div id="randomWord">Loading...</div>
    <div class="nav-buttons">
      <button onclick="prevWord()">‚Üê Previous</button>
      <button onclick="nextWord()">Next ‚Üí</button>
    </div>
  </div>

  <button class="read-btn" onclick="window.location.href='category.html'">Read ‚Üí</button>

  <script>
    const files = [
      "noun.txt", "pronoun.txt", "verb.txt", "adjective.txt", "adverb.txt",
      "synonyms.txt", "antonyms.txt", "idioms.txt", "proverbs.txt",
      "phrasal_verbs.txt", "homonyms.txt", "interjections.txt",
      "conjunctions.txt", "prepositions.txt", "quantifiers.txt",
      "derivatives.txt", "numbers.txt", "dictionary.txt", "dictionary2.txt"
    ];

    let randomWords = [];
    let currentIndex = 0;

    // Load random words from all files
    async function loadRandomWordList() {
      randomWords = [];
      for (let file of files) {
        try {
          let res = await fetch(file);
          let text = await res.text();
          let words = text.split(/\r?\n/).filter(Boolean);
          randomWords.push(...words);
        } catch {}
      }
      shuffleArray(randomWords);
      showRandomWord();
    }

    function showRandomWord() {
      if (randomWords.length === 0) {
        document.getElementById("randomWord").innerText = "No words available.";
        return;
      }
      document.getElementById("randomWord").innerText = randomWords[currentIndex];
    }

    function nextWord() {
      if (randomWords.length > 0) {
        currentIndex = (currentIndex + 1) % randomWords.length;
        showRandomWord();
      }
    }

    function prevWord() {
      if (randomWords.length > 0) {
        currentIndex = (currentIndex - 1 + randomWords.length) % randomWords.length;
        showRandomWord();
      }
    }

    // Search function
    async function searchWord() {
      let query = document.getElementById("searchInput").value.toLowerCase();
      let resultBox = document.getElementById("searchResult");
      resultBox.innerHTML = "Searching...";

      if (!query) {
        resultBox.innerHTML = "Please enter a word.";
        return;
      }

      for (let file of files) {
        try {
          let res = await fetch(file);
          let text = await res.text();
          let lines = text.split(/\r?\n/);
          for (let line of lines) {
            if (line.toLowerCase().includes(query)) {
              resultBox.innerHTML = `<strong>Found in ${file}:</strong><br>${line}`;
              return;
            }
          }
        } catch {}
      }
      resultBox.innerHTML = "‚ùå Word not found.";
    }

    // Shuffle helper
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // On load
    loadRandomWordList();
  </script>
</body>
</html>
