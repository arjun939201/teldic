<!doctype html>
<html lang="te">
<head>
<meta charset="UTF-8">
<title>బంగారు నానెలు</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Telugu:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body {
  font-family:'Noto Serif Telugu', serif;
  background:#faf6ef;
  color:#3b2f2f;
  margin:0;
}

header {
  background:linear-gradient(135deg,#d97706,#b45309);
  color:#fffaf0;
  padding:0.8rem 1.4rem;
  font-size:1.4rem;
  font-weight:700;
}

.search-box {
  background:#fffaf0;
  padding:1rem;
  border-bottom:1px solid #e7dbc8;
}

input {
  width:100%;
  padding:0.6rem 0.9rem;
  font-size:1.2rem;
  border-radius:6px;
  border:1.5px solid #e7dbc8;
  background:#faf6ef;
}

.results {
  max-width:900px;
  margin:auto;
  padding:1.2rem;
}

.result {
  padding:0.8rem 0;
  border-bottom:1px solid #e7dbc8;
  line-height:1.7;
}

.highlight {
  background:#fde68a;
  color:#9a3412;
  padding:2px 4px;
  border-radius:3px;
}
</style>
</head>

<body>

<header>బంగారు నానెలు</header>

<div class="search-box">
  <input id="q" placeholder="మాట వెతకండి">
</div>

<div class="results" id="results">
  పదం నమోదు చేయండి…
</div>

<script>
let text = "";

function highlight(t, q) {
  return t.replace(new RegExp(q, "g"), m =>
    `<span class="highlight">${m}</span>`
  );
}

fetch("https://archive.org/stream/bangaru-nanelu/BN%20Publishing%20version_djvu.txt")
  .then(r => r.text())
  .then(t => text = t);

q.oninput = () => {
  const query = q.value.trim();
  const box = document.getElementById("results");
  box.innerHTML = "";

  if (!query) return;

  let pos = 0, found = 0;

  while ((pos = text.indexOf(query, pos)) !== -1 && found < 50) {
    const start = Math.max(0, pos - 60);
    const end = Math.min(text.length, pos + query.length + 60);
    const snippet = text.slice(start, end);

    box.innerHTML += `
      <div class="result">
        ${highlight(snippet, query)}
      </div>
    `;

    pos += query.length;
    found++;
  }

  if (!box.innerHTML) {
    box.innerHTML = "ఈ మాట దొరకలేదు.";
  }
};
</script>

</body>
</html>
